<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B·∫£ng ƒëi·ªÅu khi·ªÉn v·∫≠n h√†nh - EV SWAP</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/console.css}" href="/css/console.css">
</head>
<body class="console-body">
<div class="console-background"></div>
<div class="console-overlay"></div>

<header class="console-header">
    <div class="container console-header__inner">
        <div class="brand">
            <span class="brand-icon">üöÄ</span>
            <div class="brand-meta">
                <span class="brand-name">EV SWAP</span>
                <span class="brand-caption">B·∫£ng ƒëi·ªÅu khi·ªÉn v·∫≠n h√†nh</span>
            </div>
        </div>
        <div class="header-actions">
            <div class="driver-chip">
                <div class="chip-avatar" th:text="${driverInitial}">E</div>
                <div class="chip-info">
                    <span class="chip-label">ƒêang ƒëƒÉng nh·∫≠p</span>
                    <span class="chip-name" th:text="${driverName}">T√†i x·∫ø EV</span>
                </div>
            </div>
            <a class="btn ghost" th:href="@{/dashboard}">Quay v·ªÅ dashboard</a>
        </div>
    </div>
</header>

<main>
    <section class="console-hero">
        <div class="container console-hero__inner">
            <div class="hero-copy">
                <span class="hero-badge">Phi√™n b·∫£n d√†nh cho t√†i x·∫ø</span>
                <h1>ƒêi·ªÅu ph·ªëi to√†n b·ªô nghi·ªáp v·ª• EV SWAP trong m·ªôt b·∫£ng ƒëi·ªÅu khi·ªÉn.</h1>
                <p>S·ª≠ d·ª•ng c√°c kh·ªëi h√†nh ƒë·ªông ph√≠a d∆∞·ªõi ƒë·ªÉ thao t√°c nhanh v·ªõi API: qu·∫£n l√Ω pin, ƒë·∫∑t l·ªãch ƒë·ªïi, thanh to√°n, th√¥ng b√°o, h·ªó tr·ª£ v√† nhi·ªÅu h∆°n n·ªØa. M·ªçi y√™u c·∫ßu ƒë·ªÅu hi·ªÉn th·ªã ph·∫£n h·ªìi ngay l·∫≠p t·ª©c ƒë·ªÉ b·∫°n d·ªÖ tinh ch·ªânh.</p>
                <div class="hero-actions">
                    <button type="button" class="btn primary" data-scroll-target="#module-batteries">B·∫Øt ƒë·∫ßu thao t√°c</button>
                    <a class="btn outline" href="#console-guide">H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</a>
                </div>
            </div>
            <div class="hero-card">
                <div class="hero-card__header">
                    <span class="hero-card__icon">‚öôÔ∏è</span>
                    <div>
                        <p class="hero-card__label">API ƒëang b·∫≠t</p>
                        <p class="hero-card__title">8 m√¥-ƒëun nghi·ªáp v·ª•</p>
                    </div>
                </div>
                <ul class="hero-card__list">
                    <li>G·ª≠i y√™u c·∫ßu REST tr·ª±c ti·∫øp t·ª´ tr√¨nh duy·ªát.</li>
                    <li>Tu·ª≥ ch·ªânh d·ªØ li·ªáu ngay tr∆∞·ªõc khi g·ª≠i.</li>
                    <li>Ph·∫£n h·ªìi ƒë·ªãnh d·∫°ng JSON ƒë·∫πp m·∫Øt.</li>
                </ul>
                <p class="hero-card__foot">Tip: nh·∫≠p d·ªØ li·ªáu ch√≠nh x√°c (ID, th·ªùi gian ISO) ƒë·ªÉ tr√°nh l·ªói.</p>
            </div>
        </div>
    </section>

    <section id="console-guide" class="console-guide">
        <div class="container console-guide__inner">
            <article>
                <h2>H∆∞·ªõng d·∫´n nhanh</h2>
                <p>M·ªói th·∫ª m√¥-ƒëun ƒë·∫°i di·ªán cho m·ªôt nh√≥m API. C√°c form ƒë∆∞·ª£c d·ª±ng s·∫µn tham s·ªë b·∫Øt bu·ªôc v√† t√πy ch·ªçn. B·∫°n c√≥ th·ªÉ:</p>
                <ul>
                    <li>ƒêi·ªÅn d·ªØ li·ªáu r·ªìi b·∫•m <strong>"G·ª≠i y√™u c·∫ßu"</strong> ƒë·ªÉ th·ª±c thi.</li>
                    <li>S·ª≠ d·ª•ng n√∫t <strong>"Xem danh s√°ch"</strong> ƒë·ªÉ g·ªçi nhanh c√°c API ƒë·ªçc d·ªØ li·ªáu.</li>
                    <li>Quan s√°t ph·∫£n h·ªìi ph√≠a d∆∞·ªõi c√πng c·ªßa t·ª´ng m√¥-ƒëun. N·ªôi dung ph·∫£n h·ªìi ƒë∆∞·ª£c ghi l·∫°i theo chu·∫©n JSON v·ªõi th√¥ng tin tr·∫°ng th√°i HTTP.</li>
                </ul>
                <p>N·∫øu API tr·∫£ l·ªói, ki·ªÉm tra l·∫°i ID tham chi·∫øu, ƒë·ªãnh d·∫°ng th·ªùi gian (ISO 8601) ho·∫∑c tr·∫°ng th√°i h·ª£p l·ªá.</p>
            </article>
        </div>
    </section>

    <section class="console-grid">
        <div class="container console-grid__inner">
            <article class="module-card" id="module-batteries">
                <header class="module-header">
                    <div class="module-icon">üîã</div>
                    <div>
                        <h2>Qu·∫£n l√Ω pin</h2>
                        <p>Th√™m m·ªõi, c·∫≠p nh·∫≠t tr·∫°ng th√°i pin v√† truy v·∫•n theo tr·∫°m.</p>
                    </div>
                </header>

                <details class="module-section" open>
                    <summary>Th√™m pin m·ªõi</summary>
                    <form class="api-form" data-endpoint="/api/batteries" data-method="POST">
                        <div class="form-grid">
                            <label>Tr·∫°m (ID)
                                <input type="number" name="stationId" min="1" required>
                            </label>
                            <label>Model pin
                                <input type="text" name="model" required>
                            </label>
                            <label>Tr·∫°ng th√°i (v√≠ d·ª•: available)
                                <input type="text" name="state" placeholder="available">
                            </label>
                            <label>SOH (%)
                                <input type="number" name="sohPercent" min="0" max="100">
                            </label>
                            <label>SOC (%)
                                <input type="number" name="socPercent" min="0" max="100">
                            </label>
                        </div>
                        <button type="submit" class="btn primary">G·ª≠i y√™u c·∫ßu</button>
                    </form>
                </details>

                <details class="module-section">
                    <summary>C·∫≠p nh·∫≠t pin</summary>
                    <form class="api-form" data-url-template="/api/batteries/{batteryId}" data-method="PATCH">
                        <div class="form-grid">
                            <label>M√£ pin
                                <input type="number" name="batteryId" min="1" required data-path="true">
                            </label>
                            <label>Tr·∫°m m·ªõi (ID)
                                <input type="number" name="stationId" min="1">
                            </label>
                            <label>Tr·∫°ng th√°i m·ªõi
                                <input type="text" name="state" placeholder="available / charging / faulty">
                            </label>
                            <label>SOH m·ªõi (%)
                                <input type="number" name="sohPercent" min="0" max="100">
                            </label>
                            <label>SOC m·ªõi (%)
                                <input type="number" name="socPercent" min="0" max="100">
                            </label>
                        </div>
                        <button type="submit" class="btn primary">C·∫≠p nh·∫≠t</button>
                    </form>
                </details>

                <div class="module-quick">
                    <button type="button" class="btn outline api-trigger" data-endpoint="/api/batteries" data-method="GET">Xem to√†n b·ªô pin</button>
                    <form class="api-form inline" data-url-template="/api/batteries/station/{stationId}" data-method="GET">
                        <label>Tr·∫°m
                            <input type="number" name="stationId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">Danh s√°ch theo tr·∫°m</button>
                    </form>
                </div>

                <pre class="module-output" aria-live="polite">Ch∆∞a c√≥ y√™u c·∫ßu n√†o.</pre>
            </article>

            <article class="module-card" id="module-reservations">
                <header class="module-header">
                    <div class="module-icon">üìÖ</div>
                    <div>
                        <h2>ƒê·∫∑t l·ªãch ƒë·ªïi pin</h2>
                        <p>T·∫°o, c·∫≠p nh·∫≠t tr·∫°ng th√°i v√† truy v·∫•n l·ªãch ƒë·ªïi pin.</p>
                    </div>
                </header>

                <details class="module-section" open>
                    <summary>T·∫°o l·ªãch m·ªõi</summary>
                    <form class="api-form" data-endpoint="/api/reservations" data-method="POST">
                        <div class="form-grid">
                            <label>T√†i x·∫ø (ID)
                                <input type="number" name="driverId" min="1" required>
                            </label>
                            <label>Tr·∫°m (ID)
                                <input type="number" name="stationId" min="1" required>
                            </label>
                            <label>Th·ªùi gian ƒë·∫∑t (local)
                                <input type="datetime-local" name="reservedStart" data-type="instant" required>
                            </label>
                        </div>
                        <button type="submit" class="btn primary">ƒê·∫∑t l·ªãch</button>
                    </form>
                </details>

                <details class="module-section">
                    <summary>C·∫≠p nh·∫≠t tr·∫°ng th√°i</summary>
                    <form class="api-form" data-url-template="/api/reservations/{reservationId}" data-method="PATCH">
                        <div class="form-grid">
                            <label>M√£ l·ªãch h·∫πn
                                <input type="number" name="reservationId" min="1" required data-path="true">
                            </label>
                            <label>Tr·∫°ng th√°i m·ªõi
                                <input type="text" name="status" placeholder="pending / confirmed / completed">
                            </label>
                            <label>Gi·ªù check-in
                                <input type="datetime-local" name="checkedInAt" data-type="instant">
                            </label>
                        </div>
                        <button type="submit" class="btn primary">C·∫≠p nh·∫≠t tr·∫°ng th√°i</button>
                    </form>
                </details>

                <div class="module-quick">
                    <form class="api-form inline" data-url-template="/api/reservations/{reservationId}/qr" data-method="POST">
                        <label>ID l·ªãch h·∫πn
                            <input type="number" name="reservationId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">L√†m m·ªõi QR</button>
                    </form>
                    <form class="api-form inline" data-url-template="/api/reservations/driver/{driverId}" data-method="GET">
                        <label>T√†i x·∫ø
                            <input type="number" name="driverId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">L·ªãch c·ªßa t√†i x·∫ø</button>
                    </form>
                    <form class="api-form inline" data-url-template="/api/reservations/station/{stationId}" data-method="GET">
                        <div class="form-grid form-grid--inline">
                            <label>Tr·∫°m
                                <input type="number" name="stationId" min="1" required data-path="true">
                            </label>
                            <label>Ng√†y b·∫Øt ƒë·∫ßu
                                <input type="datetime-local" name="start" data-type="instant" required>
                            </label>
                            <label>Ng√†y k·∫øt th√∫c
                                <input type="datetime-local" name="end" data-type="instant" required>
                            </label>
                        </div>
                        <button type="submit" class="btn ghost">L·ªãch theo tr·∫°m</button>
                    </form>
                </div>

                <pre class="module-output" aria-live="polite">Ch∆∞a c√≥ y√™u c·∫ßu n√†o.</pre>
            </article>

            <article class="module-card" id="module-payments">
                <header class="module-header">
                    <div class="module-icon">üí≥</div>
                    <div>
                        <h2>Thanh to√°n</h2>
                        <p>T·∫°o ho√° ƒë∆°n v√† theo d√µi tr·∫°ng th√°i thanh to√°n.</p>
                    </div>
                </header>

                <details class="module-section" open>
                    <summary>T·∫°o ho√° ƒë∆°n</summary>
                    <form class="api-form" data-endpoint="/api/payments" data-method="POST">
                        <div class="form-grid">
                            <label>T√†i x·∫ø (ID)
                                <input type="number" name="driverId" min="1" required>
                            </label>
                            <label>ƒê·∫∑t l·ªãch (ID)
                                <input type="number" name="reservationId" min="1" required>
                            </label>
                            <label>S·ªë ti·ªÅn
                                <input type="number" name="amount" min="0" step="0.01" data-type="decimal" required>
                            </label>
                            <label>Ph∆∞∆°ng th·ª©c
                                <input type="text" name="method" placeholder="Momo / ZaloPay" required>
                            </label>
                            <label>ƒê∆°n v·ªã ti·ªÅn t·ªá
                                <input type="text" name="currency" value="VND" required>
                            </label>
                            <label>M√£ giao d·ªãch ƒë·ªëi t√°c
                                <input type="text" name="providerTxnId" placeholder="TXN-2024-001">
                            </label>
                        </div>
                        <button type="submit" class="btn primary">T·∫°o ho√° ƒë∆°n</button>
                    </form>
                </details>

                <details class="module-section">
                    <summary>C·∫≠p nh·∫≠t tr·∫°ng th√°i</summary>
                    <form class="api-form" data-url-template="/api/payments/{paymentId}" data-method="PATCH">
                        <div class="form-grid">
                            <label>M√£ thanh to√°n
                                <input type="number" name="paymentId" min="1" required data-path="true">
                            </label>
                            <label>Tr·∫°ng th√°i m·ªõi
                                <input type="text" name="status" placeholder="pending / completed / failed" required>
                            </label>
                        </div>
                        <button type="submit" class="btn primary">C·∫≠p nh·∫≠t</button>
                    </form>
                </details>

                <div class="module-quick">
                    <form class="api-form inline" data-url-template="/api/payments/driver/{driverId}" data-method="GET">
                        <label>T√†i x·∫ø
                            <input type="number" name="driverId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">Danh s√°ch thanh to√°n</button>
                    </form>
                </div>

                <pre class="module-output" aria-live="polite">Ch∆∞a c√≥ y√™u c·∫ßu n√†o.</pre>
            </article>

            <article class="module-card" id="module-notifications">
                <header class="module-header">
                    <div class="module-icon">üîî</div>
                    <div>
                        <h2>Th√¥ng b√°o</h2>
                        <p>G·ª≠i th√¥ng b√°o ƒë·∫øn t√†i x·∫ø v√† ƒë√°nh d·∫•u ƒë√£ ƒë·ªçc.</p>
                    </div>
                </header>

                <details class="module-section" open>
                    <summary>G·ª≠i th√¥ng b√°o</summary>
                    <form class="api-form" data-endpoint="/api/notifications" data-method="POST">
                        <div class="form-grid">
                            <label>T√†i x·∫ø (ID)
                                <input type="number" name="driverId" min="1" required>
                            </label>
                            <label>Lo·∫°i th√¥ng b√°o
                                <input type="text" name="type" placeholder="reservation / payment" required>
                            </label>
                            <label>Ti√™u ƒë·ªÅ
                                <input type="text" name="title" required>
                            </label>
                            <label>ID l·ªãch h·∫πn (tu·ª≥ ch·ªçn)
                                <input type="number" name="reservationId" min="1">
                            </label>
                            <label>ID thanh to√°n (tu·ª≥ ch·ªçn)
                                <input type="number" name="paymentId" min="1">
                            </label>
                        </div>
                        <button type="submit" class="btn primary">G·ª≠i th√¥ng b√°o</button>
                    </form>
                </details>

                <div class="module-quick">
                    <form class="api-form inline" data-url-template="/api/notifications/{notificationId}/read" data-method="PATCH">
                        <label>M√£ th√¥ng b√°o
                            <input type="number" name="notificationId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc</button>
                    </form>
                    <form class="api-form inline" data-url-template="/api/notifications/driver/{driverId}" data-method="GET">
                        <label>T√†i x·∫ø
                            <input type="number" name="driverId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">Th√¥ng b√°o c·ªßa t√†i x·∫ø</button>
                    </form>
                    <form class="api-form inline" data-url-template="/api/notifications/driver/{driverId}/unread-count" data-method="GET">
                        <label>T√†i x·∫ø
                            <input type="number" name="driverId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">S·ªë l∆∞·ª£ng ch∆∞a ƒë·ªçc</button>
                    </form>
                </div>

                <pre class="module-output" aria-live="polite">Ch∆∞a c√≥ y√™u c·∫ßu n√†o.</pre>
            </article>

            <article class="module-card" id="module-feedback">
                <header class="module-header">
                    <div class="module-icon">üí¨</div>
                    <div>
                        <h2>Ph·∫£n h·ªìi &amp; ƒë√°nh gi√°</h2>
                        <p>Thu th·∫≠p ƒë√°nh gi√° t·ª´ t√†i x·∫ø v√† xem theo t·ª´ng tr·∫°m.</p>
                    </div>
                </header>

                <details class="module-section" open>
                    <summary>G·ª≠i ph·∫£n h·ªìi</summary>
                    <form class="api-form" data-endpoint="/api/feedback" data-method="POST">
                        <div class="form-grid">
                            <label>T√†i x·∫ø (ID)
                                <input type="number" name="driverId" min="1" required>
                            </label>
                            <label>Tr·∫°m (ID)
                                <input type="number" name="stationId" min="1" required>
                            </label>
                            <label>ƒêi·ªÉm ƒë√°nh gi√° (1-5)
                                <input type="number" name="rating" min="1" max="5" required>
                            </label>
                            <label>Nh·∫≠n x√©t
                                <textarea name="comment" rows="3" placeholder="N·ªôi dung ph·∫£n h·ªìi"></textarea>
                            </label>
                        </div>
                        <button type="submit" class="btn primary">G·ª≠i ph·∫£n h·ªìi</button>
                    </form>
                </details>

                <div class="module-quick">
                    <form class="api-form inline" data-url-template="/api/feedback/driver/{driverId}" data-method="GET">
                        <label>T√†i x·∫ø
                            <input type="number" name="driverId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">Ph·∫£n h·ªìi c·ªßa t√†i x·∫ø</button>
                    </form>
                    <form class="api-form inline" data-url-template="/api/feedback/station/{stationId}" data-method="GET">
                        <label>Tr·∫°m
                            <input type="number" name="stationId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">Ph·∫£n h·ªìi theo tr·∫°m</button>
                    </form>
                </div>

                <pre class="module-output" aria-live="polite">Ch∆∞a c√≥ y√™u c·∫ßu n√†o.</pre>
            </article>

            <article class="module-card" id="module-support">
                <header class="module-header">
                    <div class="module-icon">üõü</div>
                    <div>
                        <h2>H·ªó tr·ª£ kh√°ch h√†ng</h2>
                        <p>T·∫°o ticket h·ªó tr·ª£ v√† ph√¢n c√¥ng cho nh√¢n vi√™n.</p>
                    </div>
                </header>

                <details class="module-section" open>
                    <summary>T·∫°o ticket h·ªó tr·ª£</summary>
                    <form class="api-form" data-endpoint="/api/support" data-method="POST">
                        <div class="form-grid">
                            <label>T√†i x·∫ø (ID)
                                <input type="number" name="driverId" min="1" required>
                            </label>
                            <label>Nh√¢n vi√™n ph·ª• tr√°ch (ID)
                                <input type="number" name="staffId" min="1">
                            </label>
                            <label>Danh m·ª•c s·ª± c·ªë
                                <input type="text" name="category" placeholder="battery / station / payment" required>
                            </label>
                            <label>M√¥ t·∫£ chi ti·∫øt
                                <textarea name="comment" rows="3" placeholder="T√≥m t·∫Øt v·∫•n ƒë·ªÅ"></textarea>
                            </label>
                        </div>
                        <button type="submit" class="btn primary">G·ª≠i ticket</button>
                    </form>
                </details>

                <details class="module-section">
                    <summary>C·∫≠p nh·∫≠t ticket</summary>
                    <form class="api-form" data-url-template="/api/support/{ticketId}" data-method="PATCH">
                        <div class="form-grid">
                            <label>M√£ ticket
                                <input type="number" name="ticketId" min="1" required data-path="true">
                            </label>
                            <label>Nh√¢n vi√™n x·ª≠ l√Ω (ID)
                                <input type="number" name="staffId" min="1">
                            </label>
                            <label>Tr·∫°ng th√°i
                                <input type="text" name="status" placeholder="open / in_progress / resolved">
                            </label>
                            <label>Ghi ch√∫
                                <textarea name="note" rows="3" placeholder="Di·ªÖn gi·∫£i th√™m"></textarea>
                            </label>
                        </div>
                        <button type="submit" class="btn primary">C·∫≠p nh·∫≠t ticket</button>
                    </form>
                </details>

                <div class="module-quick">
                    <form class="api-form inline" data-url-template="/api/support/driver/{driverId}" data-method="GET">
                        <label>T√†i x·∫ø
                            <input type="number" name="driverId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">Ticket c·ªßa t√†i x·∫ø</button>
                    </form>
                    <form class="api-form inline" data-url-template="/api/support/staff/{staffId}" data-method="GET">
                        <label>Nh√¢n vi√™n
                            <input type="number" name="staffId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">Ticket c·ªßa nh√¢n vi√™n</button>
                    </form>
                    <form class="api-form inline" data-endpoint="/api/support" data-method="GET">
                        <label>Tr·∫°ng th√°i
                            <input type="text" name="status" placeholder="open / resolved" required>
                        </label>
                        <button type="submit" class="btn ghost">L·ªçc theo tr·∫°ng th√°i</button>
                    </form>
                </div>

                <pre class="module-output" aria-live="polite">Ch∆∞a c√≥ y√™u c·∫ßu n√†o.</pre>
            </article>

            <article class="module-card" id="module-swaps">
                <header class="module-header">
                    <div class="module-icon">üîÑ</div>
                    <div>
                        <h2>Giao d·ªãch ƒë·ªïi pin</h2>
                        <p>Ghi nh·∫≠n phi√™n ƒë·ªïi pin v√† truy v·∫•n l·ªãch s·ª≠ theo tr·∫°m.</p>
                    </div>
                </header>

                <details class="module-section" open>
                    <summary>Ghi nh·∫≠n giao d·ªãch</summary>
                    <form class="api-form" data-endpoint="/api/swaps" data-method="POST">
                        <div class="form-grid">
                            <label>ƒê·∫∑t l·ªãch (ID)
                                <input type="number" name="reservationId" min="1" required>
                            </label>
                            <label>Tr·∫°m (ID)
                                <input type="number" name="stationId" min="1" required>
                            </label>
                            <label>Pin tr·∫£ (ID)
                                <input type="number" name="batteryOutId" min="1" required>
                            </label>
                            <label>Pin nh·∫≠n (ID)
                                <input type="number" name="batteryInId" min="1" required>
                            </label>
                            <label>K·∫øt qu·∫£
                                <input type="text" name="result" placeholder="success / failed" required>
                            </label>
                        </div>
                        <button type="submit" class="btn primary">Ghi nh·∫≠n</button>
                    </form>
                </details>

                <div class="module-quick">
                    <form class="api-form inline" data-url-template="/api/swaps/reservation/{reservationId}" data-method="GET">
                        <label>ƒê·∫∑t l·ªãch
                            <input type="number" name="reservationId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">Giao d·ªãch theo l·ªãch</button>
                    </form>
                    <form class="api-form inline" data-url-template="/api/swaps/station/{stationId}" data-method="GET">
                        <label>Tr·∫°m
                            <input type="number" name="stationId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">L·ªãch s·ª≠ theo tr·∫°m</button>
                    </form>
                </div>

                <pre class="module-output" aria-live="polite">Ch∆∞a c√≥ y√™u c·∫ßu n√†o.</pre>
            </article>

            <article class="module-card" id="module-compatibility">
                <header class="module-header">
                    <div class="module-icon">üß©</div>
                    <div>
                        <h2>T∆∞∆°ng th√≠ch xe &amp; pin</h2>
                        <p>Li√™n k·∫øt ho·∫∑c g·ª° li√™n k·∫øt gi·ªØa model xe v√† pin.</p>
                    </div>
                </header>

                <details class="module-section" open>
                    <summary>Li√™n k·∫øt t∆∞∆°ng th√≠ch</summary>
                    <form class="api-form" data-endpoint="/api/vehicle-batteries" data-method="POST">
                        <div class="form-grid">
                            <label>Xe (ID)
                                <input type="number" name="vehicleId" min="1" required>
                            </label>
                            <label>Pin (ID)
                                <input type="number" name="batteryId" min="1" required>
                            </label>
                        </div>
                        <button type="submit" class="btn primary">T·∫°o li√™n k·∫øt</button>
                    </form>
                </details>

                <details class="module-section">
                    <summary>G·ª° li√™n k·∫øt</summary>
                    <form class="api-form" data-endpoint="/api/vehicle-batteries" data-method="DELETE">
                        <div class="form-grid">
                            <label>Xe (ID)
                                <input type="number" name="vehicleId" min="1" required>
                            </label>
                            <label>Pin (ID)
                                <input type="number" name="batteryId" min="1" required>
                            </label>
                        </div>
                        <button type="submit" class="btn primary">G·ª° b·ªè</button>
                    </form>
                </details>

                <div class="module-quick">
                    <form class="api-form inline" data-url-template="/api/vehicle-batteries/vehicle/{vehicleId}" data-method="GET">
                        <label>Xe
                            <input type="number" name="vehicleId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">Pin t∆∞∆°ng th√≠ch</button>
                    </form>
                    <form class="api-form inline" data-url-template="/api/vehicle-batteries/battery/{batteryId}" data-method="GET">
                        <label>Pin
                            <input type="number" name="batteryId" min="1" required data-path="true">
                        </label>
                        <button type="submit" class="btn ghost">Xe h·ªó tr·ª£</button>
                    </form>
                </div>

                <pre class="module-output" aria-live="polite">Ch∆∞a c√≥ y√™u c·∫ßu n√†o.</pre>
            </article>
        </div>
    </section>
</main>

<footer class="console-footer">
    <div class="container console-footer__inner">
        <p>EV SWAP &mdash; B·∫£ng ƒëi·ªÅu khi·ªÉn v·∫≠n h√†nh d√†nh cho n·ªôi b·ªô. S·∫µn s√†ng tinh ch·ªânh cho nhu c·∫ßu d·ª± √°n th·ª±c t·∫ø.</p>
        <p class="footer-note">C√°c y√™u c·∫ßu s·∫Ω s·ª≠ d·ª•ng session ƒëƒÉng nh·∫≠p hi·ªán t·∫°i. ƒê·∫£m b·∫£o t√†i kho·∫£n c·ªßa b·∫°n c√≥ ƒë·ªß d·ªØ li·ªáu m·∫´u.</p>
    </div>
</footer>

<script>
    (function () {
        const scrollButtons = document.querySelectorAll('[data-scroll-target]');
        scrollButtons.forEach((button) => {
            button.addEventListener('click', () => {
                const target = document.querySelector(button.dataset.scrollTarget);
                if (target) {
                    target.scrollIntoView({behavior: 'smooth'});
                }
            });
        });

        const cssEscape = (window.CSS && typeof window.CSS.escape === 'function')
            ? window.CSS.escape.bind(window.CSS)
            : (value) => String(value).replace(/[^a-zA-Z0-9_\-]/g, (char) => `\\${char}`);

        function parseValue(field, raw) {
            if (raw === '') {
                return null;
            }
            const type = field.dataset.type || field.type;
            if (type === 'number' || type === 'integer') {
                const numberValue = Number(raw);
                return Number.isFinite(numberValue) ? numberValue : raw;
            }
            if (field.dataset.type === 'decimal') {
                return raw;
            }
            if (field.dataset.type === 'instant') {
                const date = new Date(raw);
                if (!Number.isNaN(date.getTime())) {
                    return date.toISOString();
                }
                return raw;
            }
            return raw;
        }

        function buildRequest(form) {
            const method = (form.dataset.method || form.getAttribute('method') || 'POST').toUpperCase();
            let url = form.dataset.urlTemplate || form.dataset.endpoint || form.getAttribute('action') || '';
            const formData = new FormData(form);
            const payload = {};
            const query = new URLSearchParams();

            for (const [key, value] of formData.entries()) {
                const field = form.querySelector(`[name="${cssEscape(key)}"]`);
                if (!field) {
                    continue;
                }
                if (field.dataset.path === 'true') {
                    url = url.replace(`{${key}}`, encodeURIComponent(value));
                    continue;
                }
                const parsed = parseValue(field, value);
                if (parsed === null || parsed === '') {
                    continue;
                }
                if (method === 'GET') {
                    query.append(key, parsed);
                } else {
                    payload[key] = parsed;
                }
            }

            if (method === 'GET' && Array.from(query.keys()).length > 0) {
                url += (url.includes('?') ? '&' : '?') + query.toString();
            }

            return {method, url, payload: method === 'GET' || method === 'DELETE' ? null : payload};
        }

        function formatOutput(status, body) {
            if (body === null || typeof body === 'undefined' || body === '') {
                return `HTTP ${status}\n`;
            }
            if (typeof body === 'string') {
                return `HTTP ${status}\n${body}`;
            }
            return `HTTP ${status}\n${JSON.stringify(body, null, 2)}`;
        }

        function getOutputElement(context) {
            return context.closest('.module-card').querySelector('.module-output');
        }

        async function sendRequest(context, request) {
            const output = getOutputElement(context);
            if (!output) {
                return;
            }
            output.dataset.state = 'loading';
            output.textContent = 'ƒêang g·ª≠i y√™u c·∫ßu...';

            const options = {method: request.method, headers: {}};
            if (request.payload !== null) {
                options.headers['Content-Type'] = 'application/json';
                options.body = JSON.stringify(request.payload);
            }

            try {
                const response = await fetch(request.url, options);
                const text = await response.text();
                let parsedBody = text;
                if (text) {
                    try {
                        parsedBody = JSON.parse(text);
                    } catch (error) {
                        parsedBody = text;
                    }
                } else {
                    parsedBody = null;
                }
                output.dataset.state = response.ok ? 'success' : 'error';
                output.textContent = formatOutput(response.status, parsedBody);
            } catch (error) {
                output.dataset.state = 'error';
                output.textContent = `Kh√¥ng th·ªÉ g·ªçi API: ${error.message}`;
            }
        }

        document.querySelectorAll('.api-form').forEach((form) => {
            form.addEventListener('submit', (event) => {
                event.preventDefault();
                const request = buildRequest(form);
                sendRequest(form, request);
            });
        });

        document.querySelectorAll('.api-trigger').forEach((button) => {
            button.addEventListener('click', () => {
                const method = (button.dataset.method || 'GET').toUpperCase();
                const url = button.dataset.endpoint;
                if (!url) {
                    return;
                }
                sendRequest(button, {method, url, payload: null});
            });
        });
    })();
</script>
</body>
</html>
