<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV SWAP Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
</head>
<body class="dashboard-body">
<div class="background-gradient"></div>
<div class="background-glow"></div>

<header class="top-nav">
    <div class="container nav-inner">
        <div class="brand">
            <!-- Logo thay cho emoji -->
            <img th:src="@{/images/logo.jpg}" src="/images/logo.jpg" alt="EV SWAP" class="brand-logo">
            <span class="brand-name">EV SWAP</span>
        </div>
        <nav class="nav-links" aria-label="Äiá»u hÆ°á»›ng chÃ­nh">
            <a th:if="${loggedIn}" th:href="@{/dashboard}" class="nav-link-button">Tá»•ng quan</a>
            <a th:if="${loggedIn}" th:href="@{/vehicles}" class="nav-link-button">PhÆ°Æ¡ng tiá»‡n</a>
            <a th:if="${loggedIn}" th:href="@{/stations}" class="nav-link-button">TÃ¬m tráº¡m</a>
            <a th:if="${loggedIn}" th:href="@{/feedback}" class="nav-link-button">BÃ¡o cÃ¡o</a>
            <a th:if="${loggedIn}" th:href="@{/account}" class="nav-link-button">TÃ i khoáº£n</a>
            <a th:if="${loggedIn}" th:href="@{/support}" class="nav-link-button">Há»— trá»£</a>

            <button th:if="${!loggedIn}" type="button" class="nav-link-button nav-link-button--locked" data-feature="Tá»•ng quan">Tá»•ng quan</button>
            <button th:if="${!loggedIn}" type="button" class="nav-link-button nav-link-button--locked" data-feature="PhÆ°Æ¡ng tiá»‡n">PhÆ°Æ¡ng tiá»‡n</button>
            <button th:if="${!loggedIn}" type="button" class="nav-link-button nav-link-button--locked" data-feature="TÃ¬m tráº¡m">TÃ¬m tráº¡m</button>
            <button th:if="${!loggedIn}" type="button" class="nav-link-button nav-link-button--locked" data-feature="BÃ¡o cÃ¡o">BÃ¡o cÃ¡o</button>
            <button th:if="${!loggedIn}" type="button" class="nav-link-button nav-link-button--locked" data-feature="TÃ i khoáº£n">TÃ i khoáº£n</button>
            <button th:if="${!loggedIn}" type="button" class="nav-link-button nav-link-button--locked" data-feature="Há»— trá»£">Há»— trá»£</button>
        </nav>
        <div class="auth-area" th:if="${loggedIn}">
            <span class="welcome">Xin chÃ o, <strong th:text="${driverName}">ngÆ°á»i dÃ¹ng</strong>!</span>
            <form th:action="@{/logout}" method="post">
                <button class="btn ghost" type="submit">ÄÄƒng xuáº¥t</button>
            </form>
        </div>
        <div class="auth-area" th:if="${!loggedIn}">
            <a class="btn ghost" th:href="@{/login}">ÄÄƒng nháº­p</a>
            <a class="btn primary" th:href="@{/register}">ÄÄƒng kÃ½</a>
        </div>
    </div>
</header>

<main>
    <div class="container">
        <p class="alert" th:if="${loginSuccess}" th:text="${loginSuccess}"></p>
    </div>

    <!-- Hero: dÃ¹ng áº£nh local /images/hero.jpg -->
    <section id="overview" class="hero-banner">
        <img th:src="@{/images/hero.jpg}"
             src="/images/hero.jpg"
             alt="HÃ¬nh áº£nh phÆ°Æ¡ng tiá»‡n Ä‘iá»‡n hiá»‡n Ä‘áº¡i"
             class="hero-banner__image"
             loading="lazy">
    </section>

    <section class="stats-section container">
        <article class="stat-card">
            <header>
                <h3>50+</h3>
                <p>Tráº¡m Ä‘á»•i pin</p>
            </header>
            <p>Phá»§ sÃ³ng kháº¯p cÃ¡c thÃ nh phá»‘ lá»›n, luÃ´n sáºµn sÃ ng phá»¥c vá»¥ báº¡n má»i lÃºc.</p>
        </article>
        <article class="stat-card">
            <header>
                <h3>3 phÃºt</h3>
                <p>Thá»i gian Ä‘á»•i</p>
            </header>
            <p>Quy trÃ¬nh tá»± Ä‘á»™ng vÃ  an toÃ n, rÃºt ngáº¯n tá»‘i Ä‘a thá»i gian chá» Ä‘á»£i.</p>
        </article>
        <article class="stat-card">
            <header>
                <h3>24/7</h3>
                <p>Dá»‹ch vá»¥</p>
            </header>
            <p>Äá»™i ngÅ© há»— trá»£ táº­n tÃ¢m, Ä‘áº£m báº£o hÃ nh trÃ¬nh cá»§a báº¡n khÃ´ng bá»‹ giÃ¡n Ä‘oáº¡n.</p>
        </article>
    </section>

    <section id="benefits" class="feature-section container">
        <div class="section-header">
            <span class="section-badge">TÃ­nh nÄƒng</span>
            <h2 class="section-title">Táº¡i sao chá»n EV SWAP?</h2>
            <p class="section-description">Giáº£i phÃ¡p Ä‘á»•i pin thÃ´ng minh vá»›i cÃ´ng nghá»‡ tiÃªn tiáº¿n vÃ  dá»‹ch vá»¥ tá»‘i nháº¥t dÃ nh cho ngÆ°á»i dÃ¹ng xe mÃ¡y Ä‘iá»‡n.</p>
        </div>
        <div class="feature-grid">
            <article class="feature-card">
                <div class="feature-icon">âš¡</div>
                <h3>SiÃªu nhanh 3 phÃºt</h3>
                <p>Chá»‰ máº¥t 3 phÃºt Ä‘á»ƒ thay pin, sáºµn sÃ ng tiáº¿p tá»¥c hÃ nh trÃ¬nh mÃ  khÃ´ng cáº§n chá» sáº¡c.</p>
            </article>
            <article class="feature-card">
                <div class="feature-icon">ğŸŒ</div>
                <h3>Máº¡ng lÆ°á»›i rá»™ng kháº¯p</h3>
                <p>HÆ¡n 50 tráº¡m phá»§ kháº¯p cáº£ nÆ°á»›c, luÃ´n trong bÃ¡n kÃ­nh dÆ°á»›i 5km.</p>
            </article>
            <article class="feature-card">
                <div class="feature-icon">ğŸ›¡ï¸</div>
                <h3>An toÃ n tuyá»‡t Ä‘á»‘i</h3>
                <p>Pin Ä‘Æ°á»£c kiá»ƒm Ä‘á»‹nh nghiÃªm ngáº·t, Ä‘áº£m báº£o an toÃ n cho ngÆ°á»i dÃ¹ng vÃ  phÆ°Æ¡ng tiá»‡n.</p>
            </article>
        </div>
    </section>

    <section class="feature-section container">
        <div class="feature-grid">
            <article class="feature-card">
                <div class="feature-icon">ğŸ’°</div>
                <h3>Tiáº¿t kiá»‡m chi phÃ­</h3>
                <p>Chá»‰ 25.000Ä‘ má»—i láº§n Ä‘á»•i. Tiáº¿t kiá»‡m 60% so vá»›i xÄƒng truyá»n thá»‘ng.</p>
            </article>
            <article class="feature-card">
                <div class="feature-icon">ğŸ•’</div>
                <h3>Hoáº¡t Ä‘á»™ng 24/7</h3>
                <p>Tráº¡m Ä‘á»•i pin phá»¥c vá»¥ khÃ´ng ngá»«ng nghá»‰, há»— trá»£ má»i nhu cáº§u di chuyá»ƒn.</p>
            </article>
            <article class="feature-card">
                <div class="feature-icon">ğŸŒ±</div>
                <h3>ThÃ¢n thiá»‡n mÃ´i trÆ°á»ng</h3>
                <p>Giáº£m phÃ¡t tháº£i CO<sub>2</sub>, gÃ³p pháº§n xÃ¢y dá»±ng tÆ°Æ¡ng lai giao thÃ´ng xanh.</p>
            </article>
        </div>
    </section>

    <section id="account" class="cta-section">
        <div class="container cta-inner">
            <div class="cta-content">
                <h2>Sáºµn sÃ ng chuyá»ƒn Ä‘á»•i sang tÆ°Æ¡ng lai xanh?</h2>
                <p>Gia nháº­p cá»™ng Ä‘á»“ng hÆ¡n 10,000 tÃ i xáº¿ sá»­ dá»¥ng EV SWAP. Tráº£i nghiá»‡m cÃ´ng nghá»‡ Ä‘á»•i pin thÃ´ng minh ngay hÃ´m nay.</p>
            </div>
            <div class="cta-actions">
                <a th:href="@{/register}" class="btn primary">ÄÄƒng kÃ½ ngay</a>
                <a th:href="@{/login}" class="btn outline">ÄÃ£ cÃ³ tÃ i khoáº£n</a>
            </div>
        </div>
    </section>

    <section id="stations" class="preview-section container">
        <div class="preview-card">
            <div class="preview-header">
                <!-- DÃ¹ng logo á»Ÿ tháº» preview luÃ´n cho Ä‘á»“ng bá»™ -->
                <img th:src="@{/images/logo.jpg}" src="/images/logo.jpg" alt="EV SWAP" class="brand-logo">
                <h3>EV SWAP</h3>
                <p>Há»‡ thá»‘ng Ä‘á»•i pin xe mÃ¡y Ä‘iá»‡n thÃ´ng minh nháº¥t Viá»‡t Nam.</p>
            </div>
            <ul class="preview-list">
                <li>Äá»•i pin siÃªu nhanh</li>
                <li>Máº¡ng lÆ°á»›i rá»™ng kháº¯p</li>
                <li>An toÃ n tuyá»‡t Ä‘á»‘i</li>
            </ul>
            <a th:href="@{/login}" class="btn ghost full">ÄÄƒng nháº­p</a>
        </div>
        <div class="preview-card dark">
            <h3>Há»— trá»£ Æ°u tiÃªn</h3>
            <p>KÃ­ch hoáº¡t tÃ i khoáº£n Ä‘á»ƒ nháº­n tÆ° váº¥n riÃªng vÃ  Ä‘áº·c quyá»n chÄƒm sÃ³c khÃ¡ch hÃ ng.</p>
            <ul class="preview-list">
                <li>Äá»™i ngÅ© trá»±c 24/7</li>
                <li>HÆ°á»›ng dáº«n sá»­ dá»¥ng chi tiáº¿t</li>
                <li>Æ¯u Ä‘Ã£i dÃ nh riÃªng há»™i viÃªn</li>
            </ul>
            <a th:href="@{/register}" class="btn primary full">Tham gia ngay</a>
        </div>
    </section>

    <section class="footer container">
        <p th:if="${dashboardMessage}" th:text="${dashboardMessage}" class="footer-message"></p>
        <p class="footer-note">Â© 2025 EV SWAP. Máº¡ng lÆ°á»›i Ä‘á»•i pin xe mÃ¡y Ä‘iá»‡n thÃ´ng minh Ä‘áº§u tiÃªn táº¡i Viá»‡t Nam.</p>
    </section>
</main>

<div class="login-modal" id="login-modal" role="dialog" aria-modal="true" aria-labelledby="login-modal-title" hidden>
    <div class="login-modal__overlay" onclick="closeLoginModal()"></div>
    <div class="login-modal__dialog">
        <button type="button" class="login-modal__close" aria-label="ÄÃ³ng" onclick="closeLoginModal()">Ã—</button>
        <div class="login-modal__content">
            <div class="login-showcase">
                <!-- Logo trong modal -->
                <img th:src="@{/images/logo.jpg}" src="/images/logo.jpg" alt="EV SWAP" class="brand-logo brand-logo--showcase">
                <h3 id="login-modal-title">EV SWAP</h3>
                <p>ÄÄƒng nháº­p Ä‘á»ƒ truy cáº­p Ä‘áº§y Ä‘á»§ cÃ¡c chá»©c nÄƒng Ä‘á»•i pin thÃ´ng minh.</p>
                <ul>
                    <li>Quáº£n lÃ½ phÆ°Æ¡ng tiá»‡n vÃ  Ä‘á»•i pin</li>
                    <li>Theo dÃµi lá»‹ch sá»­ hoÃ¡ Ä‘Æ¡n</li>
                    <li>Nháº­n há»— trá»£ Æ°u tiÃªn 24/7</li>
                </ul>
            </div>
            <div class="login-form-card">
                <h4>ÄÄƒng nháº­p tÃ i khoáº£n</h4>
                <p class="login-alert">Vui lÃ²ng Ä‘Äƒng nháº­p hoáº·c Ä‘Äƒng kÃ­ Ä‘á»ƒ tiáº¿p tá»¥c sá»­ dá»¥ng.</p>
                <form th:action="@{/login}" method="post">
                    <div class="input-group">
                        <label for="modal-email">Email</label>
                        <input id="modal-email" name="email" type="email" placeholder="example@email.com" required>
                    </div>
                    <div class="input-group">
                        <label for="modal-password">Máº­t kháº©u</label>
                        <input id="modal-password" name="password" type="password" placeholder="********" required>
                    </div>
                    <button type="submit" class="btn primary full">ÄÄƒng nháº­p</button>
                </form>
                <p class="register-hint">ChÆ°a cÃ³ tÃ i khoáº£n? <a th:href="@{/register}">ÄÄƒng kÃ½ ngay</a></p>
            </div>
        </div>
    </div>
</div>

<script>
    const loginModal = document.getElementById('login-modal');
    const modalEmailInput = document.getElementById('modal-email');

    function openLoginModal() {
        if (loginModal) {
            loginModal.removeAttribute('hidden');
            document.body.classList.add('modal-open');
            if (modalEmailInput) {
                modalEmailInput.focus();
            }
        }
    }

    function closeLoginModal() {
        if (loginModal) {
            loginModal.setAttribute('hidden', '');
            document.body.classList.remove('modal-open');
        }
    }

    // Gáº¯n má»Ÿ modal cho cÃ¡c nÃºt bá»‹ khÃ³a khi chÆ°a Ä‘Äƒng nháº­p
    document.querySelectorAll('.nav-link-button--locked').forEach(function (button) {
        button.addEventListener('click', function (event) {
            event.preventDefault();
            openLoginModal();
        });
    });

    window.addEventListener('keydown', function (event) {
        if (event.key === 'Escape' && !loginModal.hasAttribute('hidden')) {
            closeLoginModal();
        }
    });
</script>
</body>
</html>
