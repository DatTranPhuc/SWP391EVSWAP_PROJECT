<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV SWAP Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}" href="/css/dashboard.css">
</head>
<body class="dashboard-body" th:classappend="${loggedIn} ? ' dashboard-body--authenticated' : ''">
<div class="background-gradient"></div>
<div class="background-glow"></div>

<header class="top-nav">
    <div class="container nav-inner">
        <div class="brand">
            <span class="brand-icon">üöó</span>
            <span class="brand-name">EV SWAP</span>
        </div>
        <nav class="nav-links" aria-label="ƒêi·ªÅu h∆∞·ªõng ch√≠nh">
            <th:block th:if="${loggedIn}">
                <a href="#overview-section" class="nav-link-button active" data-nav-target="overview-section">T·ªïng quan</a>
                <a href="#vehicles-section" class="nav-link-button" data-nav-target="vehicles-section">Ph∆∞∆°ng ti·ªán</a>
                <a href="#reservations-section" class="nav-link-button" data-nav-target="reservations-section">L·ªãch ƒë·ªïi</a>
                <a th:href="@{/operations/console}" class="nav-link-button nav-link-button--external">V·∫≠n h√†nh</a>
                <a th:href="@{/admin/console}" class="nav-link-button nav-link-button--external">Qu·∫£n tr·ªã</a>
                <a href="#stations-section" class="nav-link-button" data-nav-target="stations-section">T√¨m tr·∫°m</a>
                <a href="#reports-section" class="nav-link-button" data-nav-target="reports-section">B√°o c√°o</a>
                <a href="#account-section" class="nav-link-button" data-nav-target="account-section">T√†i kho·∫£n</a>
                <a href="#support-section" class="nav-link-button" data-nav-target="support-section">H·ªó tr·ª£</a>
            </th:block>
            <th:block th:if="${!loggedIn}">
                <a href="#overview" class="nav-link-button nav-link-button--locked" data-locked>T·ªïng quan</a>
                <a href="#benefits" class="nav-link-button nav-link-button--locked" data-locked>Ph∆∞∆°ng ti·ªán</a>
                <a href="#stations" class="nav-link-button nav-link-button--locked" data-locked>L·ªãch ƒë·ªïi</a>
                <a href="#stations" class="nav-link-button nav-link-button--locked" data-locked>V·∫≠n h√†nh</a>
                <a href="#stations" class="nav-link-button nav-link-button--locked" data-locked>Qu·∫£n tr·ªã</a>
                <a href="#stations" class="nav-link-button nav-link-button--locked" data-locked>T√¨m tr·∫°m</a>
                <a href="#benefits" class="nav-link-button nav-link-button--locked" data-locked>B√°o c√°o</a>
                <a href="#account" class="nav-link-button nav-link-button--locked" data-locked>T√†i kho·∫£n</a>
                <a href="#stations" class="nav-link-button nav-link-button--locked" data-locked>H·ªó tr·ª£</a>
            </th:block>
        </nav>
        <div class="auth-area" th:if="${loggedIn}">
            <div class="auth-avatar" aria-hidden="true" th:text="${driverInitial}">E</div>
            <div class="auth-meta">
                <span class="welcome">Xin ch√†o, <strong th:text="${driverName}">ng∆∞·ªùi d√πng</strong></span>
                <span class="subline">ID #<span th:text="${driverId}">0</span></span>
            </div>
            <form th:action="@{/logout}" method="post">
                <button class="btn ghost" type="submit">ƒêƒÉng xu·∫•t</button>
            </form>
        </div>
        <div class="auth-area" th:if="${!loggedIn}">
            <a class="btn ghost" th:href="@{/login}">ƒêƒÉng nh·∫≠p</a>
            <a class="btn primary" th:href="@{/register}">ƒêƒÉng k√Ω</a>
        </div>
    </div>
</header>

<main>
    <div th:if="${loggedIn}" class="app-container"
         data-dashboard-app
         th:attr="data-driver-id=${driverId},data-driver-name=${driverName},data-driver-email=${driverEmail},data-driver-phone=${driverPhone}">
        <div class="app-toolbar">
            <div class="app-toolbar__info">
                <h1>Trung t√¢m ƒë·ªïi pin th√¥ng minh</h1>
                <p>Qu·∫£n l√Ω ph∆∞∆°ng ti·ªán, l·ªãch ƒë·ªïi pin v√† thanh to√°n c·ªßa b·∫°n trong m·ªôt m√†n h√¨nh duy nh·∫•t.</p>
            </div>
            <div class="app-toolbar__actions">
                <button type="button" class="btn outline" data-refresh-dashboard>ƒê·ªìng b·ªô d·ªØ li·ªáu</button>
                <a class="btn ghost" th:href="@{/vehicles/manage}">Th√™m ph∆∞∆°ng ti·ªán</a>
            </div>
        </div>

        <div class="app-loader" data-dashboard-loader>
            <div class="app-spinner" aria-hidden="true"></div>
            <p>ƒêang t·∫£i d·ªØ li·ªáu th·ª±c t·∫ø c·ªßa b·∫°n...</p>
        </div>
        <div class="app-error" data-dashboard-error hidden role="alert"></div>
        <div class="app-content" data-dashboard-content hidden>
            <section id="overview-section" class="app-section">
                <div class="section-header">
                    <h2>T·ªïng quan ho·∫°t ƒë·ªông</h2>
                    <p>C·∫≠p nh·∫≠t theo th·ªùi gian th·ª±c d·ª±a tr√™n c√°c giao d·ªãch g·∫ßn ƒë√¢y.</p>
                </div>
                <div class="metric-grid">
                    <article class="metric-card">
                        <span class="metric-label">Ph∆∞∆°ng ti·ªán</span>
                        <strong class="metric-value" data-metric="vehicles">0</strong>
                        <span class="metric-caption">ƒëang ƒë∆∞·ª£c li√™n k·∫øt</span>
                    </article>
                    <article class="metric-card">
                        <span class="metric-label">L·ªãch ƒë·∫∑t s·∫Øp t·ªõi</span>
                        <strong class="metric-value" data-metric="reservations">0</strong>
                        <span class="metric-caption">ƒëang ch·ªù th·ª±c hi·ªán</span>
                    </article>
                    <article class="metric-card">
                        <span class="metric-label">L·∫ßn ƒë·ªïi pin</span>
                        <strong class="metric-value" data-metric="swaps">0</strong>
                        <span class="metric-caption">ƒë√£ ho√†n t·∫•t</span>
                    </article>
                    <article class="metric-card">
                        <span class="metric-label">T·ªïng ph√≠ ƒë√£ thanh to√°n</span>
                        <strong class="metric-value" data-metric="totalPaid">0 ‚Ç´</strong>
                        <span class="metric-caption">trong 90 ng√†y g·∫ßn nh·∫•t</span>
                    </article>
                    <article class="metric-card">
                        <span class="metric-label">Th√¥ng b√°o ch∆∞a ƒë·ªçc</span>
                        <strong class="metric-value" data-metric="unread">0</strong>
                        <span class="metric-caption">c·∫ßn b·∫°n xem</span>
                    </article>
                </div>
                <div class="insight-grid">
                    <article class="insight-card" data-next-reservation>
                        <div class="insight-header">
                            <h3>L·ªãch h·∫πn s·∫Øp t·ªõi</h3>
                            <span class="badge">ƒê·ªïi pin</span>
                        </div>
                        <p class="insight-empty">Ch∆∞a c√≥ l·ªãch h·∫πn n√†o.</p>
                        <dl class="insight-details" hidden>
                            <div>
                                <dt>Tr·∫°m</dt>
                                <dd data-field="station">-</dd>
                            </div>
                            <div>
                                <dt>Th·ªùi gian</dt>
                                <dd data-field="time">-</dd>
                            </div>
                            <div>
                                <dt>Tr·∫°ng th√°i</dt>
                                <dd data-field="status">-</dd>
                            </div>
                        </dl>
                    </article>
                    <article class="insight-card" data-last-payment>
                        <div class="insight-header">
                            <h3>Thanh to√°n g·∫ßn nh·∫•t</h3>
                            <span class="badge badge--info">V√≠ ƒëi·ªán t·ª≠</span>
                        </div>
                        <p class="insight-empty">B·∫°n ch∆∞a c√≥ giao d·ªãch n√†o.</p>
                        <dl class="insight-details" hidden>
                            <div>
                                <dt>S·ªë ti·ªÅn</dt>
                                <dd data-field="amount">-</dd>
                            </div>
                            <div>
                                <dt>Ph∆∞∆°ng th·ª©c</dt>
                                <dd data-field="method">-</dd>
                            </div>
                            <div>
                                <dt>Tr·∫°ng th√°i</dt>
                                <dd data-field="status">-</dd>
                            </div>
                            <div>
                                <dt>Th·ªùi gian</dt>
                                <dd data-field="time">-</dd>
                            </div>
                        </dl>
                    </article>
                </div>
            </section>

            <section id="vehicles-section" class="app-section">
                <div class="section-header">
                    <h2>Ph∆∞∆°ng ti·ªán c·ªßa b·∫°n</h2>
                    <p>Nh·ªØng ph∆∞∆°ng ti·ªán ƒë√£ ƒëƒÉng k√Ω c√≥ th·ªÉ ƒë·ªïi pin t·∫°i h·ªá th·ªëng EV SWAP.</p>
                </div>
                <div class="table-wrapper">
                    <table class="app-table">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>T√™n hi·ªÉn th·ªã</th>
                            <th>Bi·ªÉn s·ªë</th>
                            <th>VIN</th>
                            <th>Ng√†y th√™m</th>
                        </tr>
                        </thead>
                        <tbody data-vehicles-body>
                        <tr class="empty"><td colspan="5">ƒêang t·∫£i d·ªØ li·ªáu...</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="section-footer">
                    <a class="btn outline" th:href="@{/vehicles/manage}">Qu·∫£n l√Ω chi ti·∫øt</a>
                </div>
            </section>

            <section id="reservations-section" class="app-section">
                <div class="section-header">
                    <h2>L·ªãch ƒë·∫∑t & giao d·ªãch ƒë·ªïi pin</h2>
                    <p>Theo d√µi to√†n b·ªô quy tr√¨nh ƒë·ªïi pin g·∫ßn ƒë√¢y c·ªßa b·∫°n.</p>
                </div>
                <div class="panel-grid">
                    <div class="panel">
                        <div class="panel-header">
                            <h3>L·ªãch ƒë·∫∑t ƒë·ªïi pin</h3>
                        </div>
                        <div class="table-wrapper">
                            <table class="app-table">
                                <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Tr·∫°m</th>
                                    <th>Th·ªùi gian</th>
                                    <th>Tr·∫°ng th√°i</th>
                                </tr>
                                </thead>
                                <tbody data-reservations-body>
                                <tr class="empty"><td colspan="4">ƒêang t·∫£i d·ªØ li·ªáu...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="panel">
                        <div class="panel-header">
                            <h3>L·ªãch s·ª≠ ƒë·ªïi pin</h3>
                        </div>
                        <div class="table-wrapper">
                            <table class="app-table">
                                <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Tr·∫°m</th>
                                    <th>Th·ªùi gian</th>
                                    <th>K·∫øt qu·∫£</th>
                                </tr>
                                </thead>
                                <tbody data-swaps-body>
                                <tr class="empty"><td colspan="4">ƒêang t·∫£i d·ªØ li·ªáu...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section id="stations-section" class="app-section">
                <div class="section-header">
                    <h2>Tr·∫°m ho·∫°t ƒë·ªông n·ªïi b·∫≠t</h2>
                    <p>Ch·ªçn tr·∫°m ph√π h·ª£p v√† ƒë·∫∑t l·ªãch ƒë·ªïi pin ch·ªâ trong v√†i b∆∞·ªõc.</p>
                </div>
                <div class="panel-grid panel-grid--split">
                    <div class="panel">
                        <div class="panel-header">
                            <h3>Tr·∫°m kh·∫£ d·ª•ng</h3>
                        </div>
                        <ul class="station-list" data-station-list>
                            <li>ƒêang t·∫£i d·ªØ li·ªáu tr·∫°m...</li>
                        </ul>
                    </div>
                    <div class="panel">
                        <div class="panel-header">
                            <h3>T·∫°o l·ªãch m·ªõi</h3>
                        </div>
                        <form class="app-form" data-reservation-form>
                            <input type="hidden" name="driverId" th:value="${driverId}">
                            <div class="form-row">
                                <label for="station-select">Ch·ªçn tr·∫°m</label>
                                <select id="station-select" name="stationId" data-reservation-station required>
                                    <option value="" disabled selected>Ch·ªçn tr·∫°m ƒë·ªïi pin</option>
                                </select>
                            </div>
                            <div class="form-row">
                                <label for="reservation-time">Th·ªùi gian</label>
                                <input id="reservation-time" type="datetime-local" name="reservedStart" required>
                            </div>
                            <p class="form-feedback" data-reservation-feedback hidden></p>
                            <div class="form-actions">
                                <button type="submit" class="btn primary">ƒê·∫∑t l·ªãch</button>
                                <button type="button" class="btn ghost" data-reset-reservation>ƒê·∫∑t l·∫°i</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <section id="reports-section" class="app-section">
                <div class="section-header">
                    <h2>B√°o c√°o nhanh</h2>
                    <p>T√≥m t·∫Øt s·ªë li·ªáu ho·∫°t ƒë·ªông gi√∫p b·∫°n ƒë∆∞a ra quy·∫øt ƒë·ªãnh nhanh ch√≥ng.</p>
                </div>
                <div class="panel">
                    <div class="panel-header">
                        <h3>Hi·ªáu su·∫•t 90 ng√†y g·∫ßn nh·∫•t</h3>
                    </div>
                    <ul class="report-list" data-report-list>
                        <li>ƒêang t·ªïng h·ª£p d·ªØ li·ªáu...</li>
                    </ul>
                </div>
            </section>

            <section id="account-section" class="app-section">
                <div class="section-header">
                    <h2>T√†i kho·∫£n c·ªßa b·∫°n</h2>
                    <p>Th√¥ng tin v√† ho·∫°t ƒë·ªông thanh to√°n g·∫ßn ƒë√¢y.</p>
                </div>
                <div class="panel-grid">
                    <div class="panel">
                        <div class="panel-header">
                            <h3>Th√¥ng tin t√†i kho·∫£n</h3>
                        </div>
                        <dl class="account-summary">
                            <div>
                                <dt>T√™n t√†i x·∫ø</dt>
                                <dd th:text="${driverName}">Ng∆∞·ªùi d√πng</dd>
                            </div>
                            <div>
                                <dt>Email</dt>
                                <dd th:text="${driverEmail}">email@example.com</dd>
                            </div>
                            <div>
                                <dt>S·ªë ƒëi·ªán tho·∫°i</dt>
                                <dd th:text="${driverPhone}">Ch∆∞a c·∫≠p nh·∫≠t</dd>
                            </div>
                            <div>
                                <dt>Th√†nh vi√™n t·ª´</dt>
                                <dd th:text="${driverSince != null ? #temporals.format(driverSince, 'dd/MM/yyyy') : 'Ch∆∞a c·∫≠p nh·∫≠t'}">--</dd>
                            </div>
                        </dl>
                    </div>
                    <div class="panel">
                        <div class="panel-header">
                            <h3>Thanh to√°n g·∫ßn ƒë√¢y</h3>
                        </div>
                        <div class="table-wrapper">
                            <table class="app-table">
                                <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>S·ªë ti·ªÅn</th>
                                    <th>Ph∆∞∆°ng th·ª©c</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Th·ªùi gian</th>
                                </tr>
                                </thead>
                                <tbody data-payments-body>
                                <tr class="empty"><td colspan="5">ƒêang t·∫£i d·ªØ li·ªáu...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section id="support-section" class="app-section">
                <div class="section-header">
                    <h2>H·ªó tr·ª£ & th√¥ng b√°o</h2>
                    <p>ƒê·ªôi ng≈© EV SWAP lu√¥n ƒë·ªìng h√†nh c√πng b·∫°n 24/7.</p>
                </div>
                <div class="panel-grid panel-grid--triple">
                    <div class="panel">
                        <div class="panel-header">
                            <h3>T·∫°o y√™u c·∫ßu h·ªó tr·ª£</h3>
                        </div>
                        <form class="app-form" data-support-form>
                            <input type="hidden" name="driverId" th:value="${driverId}">
                            <div class="form-row">
                                <label for="support-category">Ch·ªß ƒë·ªÅ</label>
                                <select id="support-category" name="category" required>
                                    <option value="SWAP_ISSUE">S·ª± c·ªë ƒë·ªïi pin</option>
                                    <option value="PAYMENT">Thanh to√°n</option>
                                    <option value="APP_SUPPORT">·ª®ng d·ª•ng</option>
                                    <option value="OTHER">Kh√°c</option>
                                </select>
                            </div>
                            <div class="form-row">
                                <label for="support-comment">N·ªôi dung</label>
                                <textarea id="support-comment" name="comment" rows="4" placeholder="M√¥ t·∫£ chi ti·∫øt v·∫•n ƒë·ªÅ c·ªßa b·∫°n" required></textarea>
                            </div>
                            <p class="form-feedback" data-support-feedback hidden></p>
                            <div class="form-actions">
                                <button type="submit" class="btn primary">G·ª≠i y√™u c·∫ßu</button>
                                <button type="button" class="btn ghost" data-reset-support>X√≥a n·ªôi dung</button>
                            </div>
                        </form>
                    </div>
                    <div class="panel">
                        <div class="panel-header">
                            <h3>L·ªãch s·ª≠ h·ªó tr·ª£</h3>
                        </div>
                        <div class="table-wrapper">
                            <table class="app-table">
                                <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Ch·ªß ƒë·ªÅ</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Th·ªùi gian</th>
                                </tr>
                                </thead>
                                <tbody data-tickets-body>
                                <tr class="empty"><td colspan="4">ƒêang t·∫£i d·ªØ li·ªáu...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="panel">
                        <div class="panel-header panel-header--inline">
                            <h3>Th√¥ng b√°o g·∫ßn ƒë√¢y</h3>
                            <button type="button" class="btn ghost btn--sm" data-mark-all-read>ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc</button>
                        </div>
                        <ul class="notification-list" data-notification-list>
                            <li>ƒêang t·∫£i d·ªØ li·ªáu th√¥ng b√°o...</li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <div th:if="${!loggedIn}">
        <div class="container">
            <p class="alert" th:if="${loginSuccess}" th:text="${loginSuccess}"></p>
        </div>

        <section id="overview" class="hero-section container">
            <div class="hero-content">
                <p class="hero-subtitle">T∆∞∆°ng lai xanh cho Vi·ªát Nam</p>
                <h1 class="hero-title">ƒê·ªïi pin xe ƒëi·ªán <span>ch·ªâ trong 3 ph√∫t</span></h1>
                <p class="hero-description">H·ªá th·ªëng ƒë·ªïi pin th√¥ng minh v·ªõi c√¥ng ngh·ªá ti√™n ti·∫øn, tr·∫°m r·ªông kh·∫Øp v√† ƒë·ªôi ng≈© h·ªó tr·ª£ nhanh ch√≥ng. Tr·∫£i nghi·ªám t∆∞∆°ng lai di chuy·ªÉn xanh ngay h√¥m nay.</p>
                <div class="hero-cta">
                    <a th:href="@{/register}" class="btn primary">ƒêƒÉng k√Ω ngay</a>
                    <a th:href="@{/login}" class="btn outline">ƒê√£ c√≥ t√†i kho·∫£n</a>
                </div>
            </div>
            <div class="hero-card">
                <div class="card-icon">üöó</div>
                <div class="card-metric">
                    <span class="metric-label">S·ªë ƒëi·ªÉm ƒë·ªïi pin</span>
                    <span class="metric-value">156 tr·∫°m</span>
                </div>
                <div class="card-metric">
                    <span class="metric-label">Kho·∫£ng c√°ch g·∫ßn nh·∫•t</span>
                    <span class="metric-value">2.3 km</span>
                </div>
                <div class="card-rating">
                    <span class="metric-label">ƒê√°nh gi√°</span>
                    <div class="rating-value">‚≠ê 4.9/5.0</div>
                </div>
            </div>
        </section>

        <section class="stats-section container">
            <div class="stat-card">
                <div class="stat-value">50+</div>
                <div class="stat-label">Tr·∫°m ƒë·ªïi pin</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">3 ph√∫t</div>
                <div class="stat-label">Th·ªùi gian ƒë·ªïi</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">24/7</div>
                <div class="stat-label">D·ªãch v·ª•</div>
            </div>
        </section>

        <section id="benefits" class="feature-section container">
            <div class="section-header">
                <span class="section-badge">T√≠nh nƒÉng</span>
                <h2 class="section-title">T·∫°i sao ch·ªçn EV SWAP?</h2>
                <p class="section-description">Gi·∫£i ph√°p ƒë·ªïi pin th√¥ng minh v·ªõi c√¥ng ngh·ªá ti√™n ti·∫øn v√† d·ªãch v·ª• t·ªët nh·∫•t d√†nh cho ng∆∞·ªùi d√πng xe m√°y ƒëi·ªán.</p>
            </div>
            <div class="feature-grid">
                <article class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3>Si√™u nhanh 3 ph√∫t</h3>
                    <p>Ch·ªâ m·∫•t 3 ph√∫t ƒë·ªÉ thay pin, s·∫µn s√†ng ti·∫øp t·ª•c h√†nh tr√¨nh m√† kh√¥ng c·∫ßn ch·ªù s·∫°c.</p>
                </article>
                <article class="feature-card">
                    <div class="feature-icon">üåê</div>
                    <h3>M·∫°ng l∆∞·ªõi r·ªông kh·∫Øp</h3>
                    <p>H∆°n 50 tr·∫°m ph·ªß kh·∫Øp c·∫£ n∆∞·ªõc, lu√¥n trong b√°n k√≠nh d∆∞·ªõi 5km.</p>
                </article>
                <article class="feature-card">
                    <div class="feature-icon">üõ°Ô∏è</div>
                    <h3>An to√†n tuy·ªát ƒë·ªëi</h3>
                    <p>Pin ƒë∆∞·ª£c ki·ªÉm ƒë·ªãnh nghi√™m ng·∫∑t, ƒë·∫£m b·∫£o an to√†n cho ng∆∞·ªùi d√πng v√† ph∆∞∆°ng ti·ªán.</p>
                </article>
            </div>
        </section>

        <section class="feature-section container">
            <div class="feature-grid">
                <article class="feature-card">
                    <div class="feature-icon">üí∞</div>
                    <h3>Ti·∫øt ki·ªám chi ph√≠</h3>
                    <p>Ch·ªâ 25.000ƒë m·ªói l·∫ßn ƒë·ªïi. Ti·∫øt ki·ªám 60% so v·ªõi xƒÉng truy·ªÅn th·ªëng.</p>
                </article>
                <article class="feature-card">
                    <div class="feature-icon">üïí</div>
                    <h3>Ho·∫°t ƒë·ªông 24/7</h3>
                    <p>Tr·∫°m ƒë·ªïi pin ph·ª•c v·ª• kh√¥ng ng·ª´ng ngh·ªâ, h·ªó tr·ª£ m·ªçi nhu c·∫ßu di chuy·ªÉn.</p>
                </article>
                <article class="feature-card">
                    <div class="feature-icon">üå±</div>
                    <h3>Th√¢n thi·ªán m√¥i tr∆∞·ªùng</h3>
                    <p>Gi·∫£m ph√°t th·∫£i CO<sub>2</sub>, g√≥p ph·∫ßn x√¢y d·ª±ng t∆∞∆°ng lai giao th√¥ng xanh.</p>
                </article>
            </div>
        </section>

        <section id="account" class="cta-section">
            <div class="container cta-inner">
                <div class="cta-content">
                    <h2>S·∫µn s√†ng chuy·ªÉn ƒë·ªïi sang t∆∞∆°ng lai xanh?</h2>
                    <p>Gia nh·∫≠p c·ªông ƒë·ªìng h∆°n 10,000 t√†i x·∫ø s·ª≠ d·ª•ng EV SWAP. Tr·∫£i nghi·ªám c√¥ng ngh·ªá ƒë·ªïi pin th√¥ng minh ngay h√¥m nay.</p>
                </div>
                <div class="cta-actions">
                    <a th:href="@{/register}" class="btn primary">ƒêƒÉng k√Ω ngay</a>
                    <a th:href="@{/login}" class="btn outline">ƒê√£ c√≥ t√†i kho·∫£n</a>
                </div>
            </div>
        </section>

        <section id="stations" class="preview-section container">
            <div class="preview-card">
                <div class="preview-header">
                    <span class="brand-icon">üöó</span>
                    <h3>EV SWAP</h3>
                    <p>H·ªá th·ªëng ƒë·ªïi pin xe m√°y ƒëi·ªán th√¥ng minh nh·∫•t Vi·ªát Nam.</p>
                </div>
                <ul class="preview-list">
                    <li>ƒê·ªïi pin si√™u nhanh</li>
                    <li>M·∫°ng l∆∞·ªõi r·ªông kh·∫Øp</li>
                    <li>An to√†n tuy·ªát ƒë·ªëi</li>
                </ul>
                <a th:href="@{/login}" class="btn ghost full">ƒêƒÉng nh·∫≠p</a>
            </div>
            <div class="preview-card dark">
                <h3>H·ªó tr·ª£ ∆∞u ti√™n</h3>
                <p>K√≠ch ho·∫°t t√†i kho·∫£n ƒë·ªÉ nh·∫≠n t∆∞ v·∫•n ri√™ng v√† ƒë·∫∑c quy·ªÅn chƒÉm s√≥c kh√°ch h√†ng.</p>
                <ul class="preview-list">
                    <li>ƒê·ªôi ng≈© tr·ª±c 24/7</li>
                    <li>H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng chi ti·∫øt</li>
                    <li>∆Øu ƒë√£i d√†nh ri√™ng h·ªôi vi√™n</li>
                </ul>
                <a th:href="@{/register}" class="btn primary full">Tham gia ngay</a>
            </div>
        </section>

        <section class="footer container">
            <p th:if="${dashboardMessage}" th:text="${dashboardMessage}" class="footer-message"></p>
            <p class="footer-note">¬© 2024 EV SWAP. M·∫°ng l∆∞·ªõi ƒë·ªïi pin xe m√°y ƒëi·ªán th√¥ng minh ƒë·∫ßu ti√™n t·∫°i Vi·ªát Nam.</p>
        </section>
    </div>
</main>

<div class="login-modal" id="login-modal" role="dialog" aria-modal="true" aria-labelledby="login-modal-title" hidden>
    <div class="login-modal__overlay" onclick="closeLoginModal()"></div>
    <div class="login-modal__dialog">
        <button type="button" class="login-modal__close" aria-label="ƒê√≥ng" onclick="closeLoginModal()">√ó</button>
        <div class="login-modal__content">
            <div class="login-showcase">
                <span class="brand-icon">üöó</span>
                <h3 id="login-modal-title">EV SWAP</h3>
                <p>ƒêƒÉng nh·∫≠p ƒë·ªÉ truy c·∫≠p ƒë·∫ßy ƒë·ªß c√°c ch·ª©c nƒÉng ƒë·ªïi pin th√¥ng minh.</p>
                <ul>
                    <li>Qu·∫£n l√Ω ph∆∞∆°ng ti·ªán v√† ƒë·ªïi pin</li>
                    <li>Theo d√µi l·ªãch s·ª≠ ho√° ƒë∆°n</li>
                    <li>Nh·∫≠n h·ªó tr·ª£ ∆∞u ti√™n 24/7</li>
                </ul>
            </div>
            <div class="login-form-card">
                <h4>ƒêƒÉng nh·∫≠p t√†i kho·∫£n</h4>
                <p class="login-alert">Vui l√≤ng ƒëƒÉng nh·∫≠p ho·∫∑c ƒëƒÉng k√≠ ƒë·ªÉ ti·∫øp t·ª•c s·ª≠ d·ª•ng.</p>
                <form th:action="@{/login}" method="post">
                    <div class="input-group">
                        <label for="modal-email">Email</label>
                        <input id="modal-email" name="email" type="email" placeholder="example@email.com" required>
                    </div>
                    <div class="input-group">
                        <label for="modal-password">M·∫≠t kh·∫©u</label>
                        <input id="modal-password" name="password" type="password" placeholder="********" required>
                    </div>
                    <button type="submit" class="btn primary full">ƒêƒÉng nh·∫≠p</button>
                </form>
                <p class="register-hint">Ch∆∞a c√≥ t√†i kho·∫£n? <a th:href="@{/register}">ƒêƒÉng k√Ω ngay</a></p>
            </div>
        </div>
    </div>
</div>

<script>
    const loginModal = document.getElementById('login-modal');
    const modalEmailInput = document.getElementById('modal-email');

    function openLoginModal() {
        if (loginModal) {
            loginModal.removeAttribute('hidden');
            document.body.classList.add('modal-open');
            if (modalEmailInput) {
                modalEmailInput.focus();
            }
        }
    }

    function closeLoginModal() {
        if (loginModal) {
            loginModal.setAttribute('hidden', '');
            document.body.classList.remove('modal-open');
        }
    }

    document.querySelectorAll('.nav-link-button--locked, [data-locked]')
        .forEach(function (button) {
            button.addEventListener('click', function (event) {
                event.preventDefault();
                openLoginModal();
            });
        });

    window.addEventListener('keydown', function (event) {
        if (event.key === 'Escape' && loginModal && !loginModal.hasAttribute('hidden')) {
            closeLoginModal();
        }
    });
</script>
<script th:if="${loggedIn}" type="module" th:src="@{/js/dashboard-app.js}" src="/js/dashboard-app.js"></script>
</body>
</html>
